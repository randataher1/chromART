<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Gallery</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <link href="css/ratchet.css" rel="stylesheet">

    <link href="css/chromart.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.19.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!--<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>-->

    <script type="text/javascript" src="js/sessvars.js"></script>

    <script type="text/javascript" src="js/bootstrap.js"></script>

  </head>

  <body>

    <div class="containerWhite">

      <div class="carouselContainer">
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="false">
          <!-- Indicators -->
          <ol class="carousel-indicators">
            <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
            <li data-target="#carousel-example-generic" data-slide-to="1"></li>
            <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            <li data-target="#carousel-example-generic" data-slide-to="3"></li>
            <li data-target="#carousel-example-generic" data-slide-to="4"></li>
          </ol>

          <!-- Wrapper for slides -->
          <div class="carousel-inner">
            <div class="item active">
              <img src="img/anime.jpg">
              <div class="carousel-caption imageCaption">
                <div class="row imageContents">
                  <div class="col-xs-3"> 
                    <a href="profile.html?userID="> 
                      <img class="img-circle imageProfilePicture" src="" />
                    </a>
                  </div>
                  <div class="col-xs-5">
                    <div class="row">
                      <a href="profile.html?userID=">
                        Username
                      </a>
                    </div>
                    <div class="row">
                      Description
                    </div>
                    <div class="row">
                      Category
                    </div>
                  </div>
                  <div class="col-xs-2">
                    <div class="row">
                      <button type="button" id="imageLike" class="btn btn-default btn-sm like">
                        <span class="glyphicon glyphicon-thumbs-up"></span>
                      </button>
                    </div>
                    <div class="row">
                      <div class="likeCounter" id="numLikes">
                        0
                      </div>
                    </div>
                  </div>
                  <div class="col-xs-2">
                    <div class="row">
                      <button type="button" id="imageDislike" class="btn btn-default btn-sm dislike">
                          <span class="glyphicon glyphicon-thumbs-down"></span>
                      </button>
                    </div>
                    <div class="row">
                      <div class="dislikeCounter" id="numDislikes">
                        0
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="item">
              <img src="img/nature.jpg">
            </div>
            <div class="item">
              <img src="img/impressionist.jpg">
            </div>
            <div class="item">
              <img src="img/abstract.jpg">
            </div>
            <div class="item">
              <img src="img/modern.jpg">
            </div>
          </div>

          <!-- Controls -->
          <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
          </a>
          <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
          </a>
        </div>

      </div>

      <div class="clear"></div>

      <div>
        <nav class="bar bar-tab">
          <a class="tab-item" href="home.html">
            <span class="icon icon-home"></span>
            <span class="tab-label">Home</span>
          </a>
          <a class="tab-item" href="profile.html">
            <span class="icon icon-person"></span>
            <span class="tab-label">Profile</span>
          </a>
          <a class="tab-item active" href="explore.html">
            <span class="icon icon-pages"></span>
            <span class="tab-label">Explore</span>
          </a>
          <a class="tab-item" href="upload.html">
            <span class="icon icon-share"></span>
            <span class="tab-label">Upload</span>
          </a>
          <a class="tab-item" href="messagedirectory.html">
            <span class="icon icon-compose"></span>
            <span class="tab-label">Message</span>
          </a>
        </nav>
      </div>

    </div> <!-- /container -->

  <script type="text/javascript">
    Parse.initialize("Og5SrfaWadYcXArMTgGM1gJwHy750LoBtJVRV0JA", "aCd8Z5xLTOomMPazIG4i8z691PncoCBnKjW5iL1u");

    sessvars.$.clearMem();

    var $_GET = {};
    if(document.location.toString().indexOf('?') !== -1) {
        var query = document.location
                       .toString()
                       // get the query string
                       .replace(/^.*?\?/, '')
                       // and remove any existing hash string (thanks, @vrijdenker)
                       .replace(/#.*$/, '')
                       .split('&');

        for(var i=0, l=query.length; i<l; i++) {
           var aux = decodeURIComponent(query[i]).split('=');
           $_GET[aux[0]] = aux[1];
        }
    }

    //Set galleryID to the ID of the get variable
    var galleryID = $_GET['galleryID'];

    function searchForGalleryBasedOnID (callback) {
      var Gallery = Parse.Object.extend("Gallery");
      var galleryQuery = new Parse.Query(Gallery);
      galleryQuery.equalTo("objectId", galleryID);
      galleryQuery.include("user");
      galleryQuery.first({
        success: function(galleryBasedonID) {
          alert("Found gallery");
          callback(galleryBasedonID);
        },
        error: function(error) {
          alert("Error finding gallery");
        }
      });
    }

    function searchForImagesBasedOnGallery (galleryObject, callback) {
      var Img = Parse.Object.extend("Image");
      var imageQuery = new Parse.Query(Img);
      imageQuery.equalTo("gallery", galleryObject);
      imageQuery.include("user");
      imageQuery.find({
        success: function(imagesInGallery) {
          alert("Found images in gallery");
          callback(imagesInGallery);
        },
        error: function(error) {
          alert("Error finding images in gallery");
        }
      });
    }

    function getUserBasedOnGallery (galleryObject) {
      return galleryObject.get("user");
    }

    // //Removes arrows from first and last images
    // function checkitem () {
    //   var $this;
    //   $this = $(".carousel");
      
    //   if ($(".carousel .carousel-inner .item:first").hasClass("active")) {
    //     $this.children(".left").hide();
    //     $this.children(".right").show();
    //   }
    //   else if ($(".carousel .carousel-inner .item:last").hasClass("active")) {
    //     $this.children(".right").hide();
    //     $this.children(".left").show();
    //   }
    //   else {
    //     $this.children(".carousel-control").show();
    //   }
    // };

    // checkitem();

    // $(".carousel").on("slid.bs.carousel", "", checkitem);

    function changeHeightOfArrow (imageClass) {
      var $this;
      $this = $(".carousel");
      var height = $("." + imageClass).css( "height" );
      $this.children(".carousel-control").css("height", height);
    }

  </script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  </body>
</html>
