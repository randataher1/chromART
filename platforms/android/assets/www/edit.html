<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Edit</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <link href="css/ratchet.css" rel="stylesheet">

    <link href="css/chromart.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.19.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <!--<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>-->

  </head>

  <body>

    <div class="container">
      <div class="containerDark">

        <div class="pageHeader">
          <div class="settingsBar">
            Edit
          </div>
        </div>

        <div class="editContainer">
          <div>
            <form role="form">
              <div class="form-group">
                <textarea type="text" class="form-control inputDescription" rows="3" placeholder="Description"></textarea>
              </div>
              <div class="form-group">
                <input type="text" class="form-control inputFacebook" placeholder="Facebook link">
              </div>
              <div class="form-group">
                <input type="text" class="form-control inputTwitter" placeholder="Twitter link">
              </div>
              <button type="submit" class="btn blueButton toProfile">Save</button>
            </form>
          </div>
        </div>

      </div>

      <div>
        <nav class="bar bar-tab">
          <a class="tab-item" href="home.html">
            <span class="icon icon-home"></span>
            <span class="tab-label">Home</span>
          </a>
          <a class="tab-item active" href="profile.html">
            <span class="icon icon-person"></span>
            <span class="tab-label">Profile</span>
          </a>
          <a class="tab-item" href="explore.html">
            <span class="icon icon-pages"></span>
            <span class="tab-label">Explore</span>
          </a>
          <a class="tab-item" href="upload.html">
            <span class="icon icon-share"></span>
            <span class="tab-label">Upload</span>
          </a>
          <a class="tab-item" href="message.html">
            <span class="icon icon-compose"></span>
            <span class="tab-label">Message</span>
          </a>
        </nav>
      </div>

    </div> <!-- /container -->


  <script type="text/javascript">
    Parse.initialize("Og5SrfaWadYcXArMTgGM1gJwHy750LoBtJVRV0JA", "aCd8Z5xLTOomMPazIG4i8z691PncoCBnKjW5iL1u");

    function thereIsADescription () {
      if ($(".inputDescription").val() != "") {
        return true;
      }
      else {
        return false;
      }
    }

    function thereIsAFacebook () {
      if ($(".inputFacebook").val() != "") {
        return true;
      }
      else {
        return false;
      }
    }

    function thereIsATwitter () {
      if ($(".inputTwitter").val() != "") {
        return true;
      }
      else {
        return false;
      }
    }

    function getDescription () {
      return $(".inputDescription").val();
    }

    function getFacebook () {
      $(".inputFacebook").val();
    }

    function getTwitter () {
      $(".inputTwitter").val();
    }

    function setDescription (currentUser) {
      currentUser.set("profileDescription", getDescription());
    }

    function setFacebook (currentUser) {
      currentUser.set("facebook", getFacebook());
    }

    function setTwitter (currentUser) {
      currentUser.set("twitter", getTwitter());
    }

    $("form").on("submit", function(e) {
      e.preventDefault();

      var user = Parse.User.current();

      if (thereIsADescription()) {
        setDescription(user);
      }

      if (thereIsAFacebook()) {
        setFacebook(user);
      }

      if (thereIsATwitter()) {
        setTwitter(user);
      }

      user.save(null, {
        success: function(save) {
          // Execute any logic that should take place after the object is saved.
          window.location.href = 'profile.html';
        },
        error: function(error) {
          // Execute any logic that should take place if the save fails.
          // error is a Parse.Error with an error code and description.
          alert('Failed to save information');
        }
      });

    });
  </script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  </body>
</html>
